// æ‹¿åˆ°äº†ä¸‰ä¸ªå¯¹è±¡
// 1. åˆå§‹ç•Œé¢çš„ä¿¡å°æ ·å¼ - card
// 2. åˆå§‹ç•Œé¢å¡ç‰‡å³ä¸‹æ–¹çš„ çˆ±å¿ƒå›¾æ¡ˆ --heart
// 3. åƒæ˜¯ä¸ºäº†å¼•å‡ºå¸ƒå±€çš„ä¸œè¥¿... -box
let heart = document.querySelector(".heart");
let card = document.querySelector(".card");
let box = document.querySelector("#box");

heart.addEventListener("click", function () {

  // 1. ç¬¬ä¸€ä¸ªé¡µé¢æ¶ˆå¤±
  // opacityé€æ˜åº¦
  // è¿™é‡Œè®¾ç½®ä¸º0ï¼Œå®é™…ä¸Šå°±æ˜¯è®©ç¬¬ä¸€ä¸ªç•Œé¢æ¶ˆå¤±
  card.setAttribute("style", "opacity:0");


  // 2. æ’­æ”¾èƒŒæ™¯éŸ³ä¹
  // åˆ›å»ºäº†ä¸€ä¸ªéŸ³é¢‘å…ƒç´ ï¼Œæ„Ÿè§‰å®é™…ä¸Šå°±æ˜¯è®¾ç½®äº†ä¸€ä¸ªæ ‡ç­¾å…ƒç´ å¹¶ä¸”è·å–åˆ°äº†è¿™ä¸ªå¯¹è±¡
  // å–å¾—å¯¹è±¡ä¹‹åæ‰èƒ½è¿›è¡Œæ“ä½œ
  let x = document.createElement("audio");

  // element.setAttribute(attributeName, value);
  // attributeNameï¼šè¦è®¾ç½®çš„å±æ€§åï¼ˆä¾‹å¦‚ styleã€srcã€id ç­‰ï¼‰ã€‚
  // valueï¼šè¦è®¾ç½®çš„å±æ€§å€¼ã€‚
  x.setAttribute("src", "./letter/backgroundMusic.mp3");
  x.setAttribute("autoplay", "autoplay");
  x.setAttribute("loop", "loop");


  // 3. å¼€å§‹æ‰“å­—
  // æ‰“å­—æ•ˆæœ
  let i = 0;
  let str =
    "çœ¨ä¸€ä¸‹çœ¼å°±èƒ½å›å¿†å®Œçš„æ‰€æœ‰äº‹é‡Œï¼Œæœ‰ä¸€æ®µæœ‰åºç´§è‡´ä½†æ¸©é¦¨çš„è®°å¿†ï¼Œå¤§å®¶çš„ç¤¾äº¤è·ç¦»å¾ˆè¿‘ï¼Œæ²¡æœ‰ä»€ä¹ˆåº”ä¸åº”è¯¥æˆ–è€…æ„¿ä¸æ„¿æ„ï¼ŒåŒå­¦å½•ã€æ˜ä¿¡ç‰‡ç”šè‡³æ˜¯å°çº¸ç‰‡ï¼Œå„ç§å„æ ·çš„å­—è¿¹ä¸­æµæ·Œç€ç‹¬å±äºé‚£æ—¶çš„å›å¿†ã€‚<å½“æ—¶ï¼Œçœ‹ä¸€çœ¼å­—è¿¹ä¾¿çŸ¥é“å‡ºäºè°æ‰‹ï¼Œä¸Šé¢çš„å°å°æ’ç”»æ—¶è‡³ä»Šæ—¥ä¹Ÿæ´¥æ´¥ä¹é“ï¼Œæ˜¯æˆ‘ç†è§£ä¸å“å‘³æ„Ÿæƒ…çš„çº¿ç´¢ã€‚<å†™ä¿¡çœŸçš„æ˜¯ä¸€ä»¶å¾ˆæ¸©æŸ”çš„äº‹ï¼Œæ€€æ£ç€æœ€å¥½çš„æœŸè®¸ï¼Œæµå‘å½¼æ­¤çš„å¿ƒåŠé—´ã€‚â‚^Ë¶ â•¸ğ–¥¦  â•¸Ëµ^â‚âŸ†#æ”¶åˆ°ä½ çš„å°ç¤¼ç‰©å’Œç•™è¨€ï¼ŒçœŸçš„å¾ˆå¼€å¿ƒå‘ï¼Œæ¼«ç”»å¤§æ¦‚èŠ±äº†40minså·¦å³å°±å¾ˆèˆ’çˆ½åœ°çœ‹å®Œäº†ï¼Œéƒ½æ˜¯ç®€çŸ­ä½†åˆæ¸©é¦¨çš„å°æ•…äº‹ã€‚è·¨å›½æ‹å’Œå…»å­©å­å…¶å®åº”è¯¥å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œä»…ä»…æ˜¯èƒ½æƒ³åˆ°çš„å›°éš¾å°±è§‰å¾—å‹åŠ›å±±å¤§äº†...ä½œè€…ä½œä¸ºæ¼«ç”»ç›¸å…³å·¥ä½œè€…å¤§æ¦‚æ˜¯æœ‰å…¶ä»–çš„æ­£äº‹çš„å§ï¼Ÿå¯ä¾æ—§æŠ½å‡ºæ—¶é—´åˆ›ä½œäº†ä¸€éƒ¨å……æ»¡çˆ±ä¸å°å°æ„ŸåŠ¨çš„äº²å­æ¼«ï¼ŒçœŸçš„å¾ˆæ£’ã€‚<æˆ‘æ›¾ç»çœ‹åˆ°ä¸€ä½upçš„ä¸ªç­¾ï¼Œå½“æ—¶å°±è§‰å¾—æœ‰ç§å°å°è§¦åŠ¨ï¼Œåœ¨æ­¤å¤„ä¹Ÿæœ‰ç‚¹å¯¹åº”äº†â€”â€”å·å·æŠŠé˜´éœ¾è—èµ·æ¥ï¼Œç„¶åæŠŠé˜³å…‰éƒ½ç•™ç»™ä½ ä»¬ï¼<æ„Ÿå—çˆ±ï¼Œç†è§£çˆ±ï¼Œä¼ é€’çˆ±ï¼Œå¦‚åŒæ¼«ç”»åä¸€æ ·ï¼Œä¸–ç•Œæ˜¯ä½ çš„çŒ«çª~#ä¸€ä¸ªç›¸å½“ç®€å•çš„é¡µé¢ï¼Œä»…ä»…æ˜¯è‡ªå·±çªå‘å¥‡æƒ³çš„ç»“æœï¼Œå¸Œæœ›ä½ å–œæ¬¢ã€‚â¤<ï¼ˆpsï¼šå’³å’³ï¼Œè¯è™½å¦‚æ­¤æˆ‘ç«Ÿç„¶è¿˜æ˜¯é€‰æ‹©äº†è¿™ç§ç”µå­ç¨‹åºçš„æ–¹å¼ï¼ŒåŸå› æ˜¯æœ‰å¾ˆå¤šå•¦ï¼Œä½†è¦æ˜¯åƒè‡ªå·±å¹³æ—¶é‚£æ ·è‡ªé¡¾è‡ªè§£é‡Šï¼Œå°±å¤šå°‘ä¼šæ˜¾å¾—è‡ƒè‚¿äº†ï¼Œä¸è¿‡æˆ‘ç›¸ä¿¡è¿™ä¸ä¼šæ˜¯ç»å”±çš„è¯´Ã²á†ºÃ³ï¼‰";
  let content = "";

  function print() {
    if (str[i] == "<") {
      document.getElementById("box").innerHTML = content + "<br><br>|";
      content += "<br><br>";
    } else if (str[i] == "#") {
      document.getElementById("box").innerHTML = content + "<br><br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><br>|";
      content += "<br><br>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br><br>";
    }
    else {
      // ä¸ºå‘ˆç°å†…å®¹é€ä¸ªæ‹¼æ¥å­—ç¬¦ä¸²
      content += str[i];
      // åŠ ä¸Šå…‰æ ‡
      box.innerHTML = content + "|";
    }
    i++;
  }

  // setTimeout()ï¼ŒæŒ‡å®šæ—¶é—´åæ‰§è¡Œä»£ç 
  // setInterval()ï¼Œå‘¨æœŸæ€§æ‰§è¡ŒæŸä¸ªä»£ç 
  setTimeout(() => {
    // æ­¤å¤„è®¾ç½®äº†å®šæ—¶å™¨id
    let timer = setInterval(() => {
      // æ‰“å­—
      print();
      // æ‰“å®Œå°±åœæ­¢
      if (i == str.length) clearInterval(timer);
    }, 300); // 190æ¯«ç§’æ‰“ä¸€ä¸ªå­—ï¼Œå…¶å®ç»†å¿ƒå‘ç°çš„è¯ï¼Œè¿™ä¸ªé¡¹ç›®è¿˜æ˜¯æœ‰ä¸ªå°å°çš„bugï¼Œæ— æ³•ç”¨è¯­è¨€æè¿°è¿™ä¸ªbugï¼Œå¦‚æœä½ æƒ³ä¼˜åŒ–çš„è¯ æœ‰ä¸€ç§ç®€å•çš„æ–¹æ³•å°±æ˜¯è°ƒå¿«æ‰“å­—çš„é€Ÿåº¦ï¼Œè¿™æ ·é‚£ä¸ªbugçœ‹èµ·æ¥å°±ä¸ä¼šå¾ˆæ˜æ˜¾,æˆ‘å¤ªèœäº† ä¸ä¼šæ”¹é‚£ä¸ªbug
  }, 5500); //5500æ¯«ç§’å¼€å§‹æ‰“å­—


  // 4. èƒŒæ™¯å‡ºç°
  function appearBackground() {
    setTimeout(() => {
      // è®¾ç½®csså±æ€§çš„ä¸€ç§æ–¹å¼
      box.style.opacity = 1;
    }, 1500);
  }
  appearBackground();
});
